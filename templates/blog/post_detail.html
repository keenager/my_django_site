{% extends 'base.html' %}
{% load blog_filter %}
{% block content %}
  <div class="container">
    <!-- 메시지 -->
    {% if messages %}
      <div class="alert alert-danger my-3">
        {% for message in messages %}
          <strong>{{ message.tag }}</strong>
          <ul>
            <li>{{ message.message }}</li>
          </ul>
        {% endfor %}
      </div>
    {% endif %}
    <!-- 제목 -->
    <h1 class="my-3 text-center">{{ post.title }}</h1>
    <!-- 정보 -->
    <div class="d-flex flex-column align-items-end">
      <p>글쓴이:
        {{ post.author }}</p>
      <p class="text-end">쓴날:
        {{ post.pub_date }}
        <br>
        고친날:
        {{ post.mod_date }}</p>
      <p>태그:
        {{ post.tag }}</p>
    </div>
    <!-- 수정 버튼 -->
    <div class="text-end">
      {% if post.author == request.user %}
        <a href="javascript:void(0)" data-uri="{% url 'blog:post_delete' post.pk %}" id="delBtn" class="btn btn-sm btn-outline-secondary mx-2">삭제</a>
        <a href="{% url 'blog:post_modify' post.pk %}" class="btn btn-sm btn-primary">수정</a>
      {% endif %}
    </div>
    <!-- 본문 -->
    <p>{{ post.content|mark|safe }}</p>
    <div class="text-center">
      <a href="{% url 'blog:index' %}">목록으로</a>
    </div>
  </div>
{% endblock content %}

{% block script %}
  <script type="text/javascript">
    delBtn.addEventListener('click', (e) => {
      if (confirm('정말로 삭제하시겠습니까?')) {
        location.href = e.currentTarget.dataset.uri;
      }
    });
  </script>
{% endblock script %}
